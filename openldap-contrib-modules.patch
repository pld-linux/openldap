diff -urN openldap-2.4.25/configure.in openldap-2.4.25-contrib/configure.in
--- openldap-2.4.25/configure.in	2011-03-24 02:18:25.000000000 +0100
+++ openldap-2.4.25-contrib/configure.in	2011-03-28 17:59:14.569152000 +0200
@@ -3188,6 +3188,28 @@
 [servers/slapd/shell-backends/Makefile:build/top.mk:servers/slapd/shell-backends/Makefile.in:build/srv.mk]
 [servers/slapd/slapi/Makefile:build/top.mk:servers/slapd/slapi/Makefile.in:build/lib.mk:build/lib-shared.mk]
 [servers/slapd/overlays/Makefile:build/top.mk:servers/slapd/overlays/Makefile.in:build/lib.mk]
+[contrib/slapd-modules/Makefile:build/top.mk:contrib/slapd-modules/Makefile.in:build/dir.mk]
+[contrib/slapd-modules/acl/Makefile:build/top.mk:contrib/slapd-modules/acl/Makefile.in:build/mod.mk]
+[contrib/slapd-modules/addpartial/Makefile:build/top.mk:contrib/slapd-modules/addpartial/Makefile.in:build/mod.mk]
+[contrib/slapd-modules/allop/Makefile:build/top.mk:contrib/slapd-modules/allop/Makefile.in:build/mod.mk:build/man.mk]
+[contrib/slapd-modules/allowed/Makefile:build/top.mk:contrib/slapd-modules/allowed/Makefile.in:build/mod.mk]
+[contrib/slapd-modules/autogroup/Makefile:build/top.mk:contrib/slapd-modules/autogroup/Makefile.in:build/mod.mk]
+[contrib/slapd-modules/cloak/Makefile:build/top.mk:contrib/slapd-modules/cloak/Makefile.in:build/mod.mk:build/man.mk]
+[contrib/slapd-modules/comp_match/Makefile:build/top.mk:contrib/slapd-modules/comp_match/Makefile.in:build/mod.mk]
+[contrib/slapd-modules/denyop/Makefile:build/top.mk:contrib/slapd-modules/denyop/Makefile.in:build/mod.mk]
+[contrib/slapd-modules/dsaschema/Makefile:build/top.mk:contrib/slapd-modules/dsaschema/Makefile.in:build/mod.mk]
+[contrib/slapd-modules/dupent/Makefile:build/top.mk:contrib/slapd-modules/dupent/Makefile.in:build/mod.mk]
+[contrib/slapd-modules/kinit/Makefile:build/top.mk:contrib/slapd-modules/kinit/Makefile.in:build/mod.mk]
+[contrib/slapd-modules/lastbind/Makefile:build/top.mk:contrib/slapd-modules/lastbind/Makefile.in:build/mod.mk:build/man.mk]
+[contrib/slapd-modules/lastmod/Makefile:build/top.mk:contrib/slapd-modules/lastmod/Makefile.in:build/mod.mk:build/man.mk]
+[contrib/slapd-modules/noopsrch/Makefile:build/top.mk:contrib/slapd-modules/noopsrch/Makefile.in:build/mod.mk]
+[contrib/slapd-modules/nops/Makefile:build/top.mk:contrib/slapd-modules/nops/Makefile.in:build/mod.mk:build/man.mk]
+[contrib/slapd-modules/nssov/Makefile:build/top.mk:contrib/slapd-modules/nssov/Makefile.in:build/mod.mk:build/man.mk]
+[contrib/slapd-modules/passwd/Makefile:build/top.mk:contrib/slapd-modules/passwd/Makefile.in:build/lib.mk]
+[contrib/slapd-modules/proxyOld/Makefile:build/top.mk:contrib/slapd-modules/proxyOld/Makefile.in:build/mod.mk]
+[contrib/slapd-modules/samba4/Makefile:build/top.mk:contrib/slapd-modules/samba4/Makefile.in:build/lib.mk]
+[contrib/slapd-modules/smbk5pwd/Makefile:build/top.mk:contrib/slapd-modules/smbk5pwd/Makefile.in:build/mod.mk]
+[contrib/slapd-modules/trace/Makefile:build/top.mk:contrib/slapd-modules/trace/Makefile.in:build/mod.mk]
 [tests/Makefile:build/top.mk:tests/Makefile.in:build/dir.mk]
 [tests/run]
 [tests/progs/Makefile:build/top.mk:tests/progs/Makefile.in:build/rules.mk])
diff -urN openldap-2.4.25/contrib/slapd-modules/acl/Makefile.in openldap-2.4.25-contrib/contrib/slapd-modules/acl/Makefile.in
--- openldap-2.4.25/contrib/slapd-modules/acl/Makefile.in	1970-01-01 01:00:00.000000000 +0100
+++ openldap-2.4.25-contrib/contrib/slapd-modules/acl/Makefile.in	2011-03-28 17:51:20.119152000 +0200
@@ -0,0 +1,20 @@
+BUILD_MOD = mod
+
+SRCS = posixgroup.c
+
+OBJS = posixgroup.lo
+
+LIBBASE = acl-posixgroup
+
+LDAP_INCDIR= ../../../include       
+LDAP_LIBDIR= ../../../libraries
+
+MOD_DEFS = -DSLAPD_IMPORT
+#MOD_LIBS = 
+
+shared_LDAP_LIBS = $(LDAP_LIBLDAP_R_LA) $(LDAP_LIBLBER_LA)
+NT_LINK_LIBS = -L.. -lslapd $(@BUILD_LIBS_DYNAMIC@_LDAP_LIBS)
+UNIX_LINK_LIBS = $(@BUILD_LIBS_DYNAMIC@_LDAP_LIBS)
+
+XINCPATH = -I. -I$(srcdir)/. -I../../../servers/slapd
+XDEFS = $(MODULES_CPPFLAGS)
diff -urN openldap-2.4.25/contrib/slapd-modules/addpartial/Makefile openldap-2.4.25-contrib/contrib/slapd-modules/addpartial/Makefile
--- openldap-2.4.25/contrib/slapd-modules/addpartial/Makefile	2009-01-21 01:18:19.000000000 +0100
+++ openldap-2.4.25-contrib/contrib/slapd-modules/addpartial/Makefile	1970-01-01 01:00:00.000000000 +0100
@@ -1,13 +0,0 @@
-# $OpenLDAP: pkg/ldap/contrib/slapd-modules/addpartial/Makefile,v 1.1.2.4 2009/01/21 00:18:19 quanah Exp $
-OPENLDAP_SRC=../../..
-OPENLDAP_BLD=../../..
-CPPFLAGS+=-I${OPENLDAP_SRC}/include -I${OPENLDAP_SRC}/servers/slapd -I${OPENLDAP_BLD}/include
-CC=gcc
-
-all: addpartial-overlay.so
-
-addpartial-overlay.so: addpartial-overlay.c
-	$(CC) -shared $(CPPFLAGS) $(LDFLAGS) -Wall -o $@ $?
-
-clean:
-	rm addpartial-overlay.so
diff -urN openldap-2.4.25/contrib/slapd-modules/addpartial/Makefile.in openldap-2.4.25-contrib/contrib/slapd-modules/addpartial/Makefile.in
--- openldap-2.4.25/contrib/slapd-modules/addpartial/Makefile.in	1970-01-01 01:00:00.000000000 +0100
+++ openldap-2.4.25-contrib/contrib/slapd-modules/addpartial/Makefile.in	2011-03-28 17:51:20.122152000 +0200
@@ -0,0 +1,20 @@
+BUILD_MOD = mod
+
+SRCS = addpartial-overlay.c
+
+OBJS = addpartial-overlay.lo
+
+LIBBASE = addpartial-overlay
+
+LDAP_INCDIR= ../../../include       
+LDAP_LIBDIR= ../../../libraries
+
+MOD_DEFS = -DSLAPD_IMPORT
+#MOD_LIBS = 
+
+shared_LDAP_LIBS = $(LDAP_LIBLDAP_R_LA) $(LDAP_LIBLBER_LA)
+NT_LINK_LIBS = -L.. -lslapd $(@BUILD_LIBS_DYNAMIC@_LDAP_LIBS)
+UNIX_LINK_LIBS = $(@BUILD_LIBS_DYNAMIC@_LDAP_LIBS)
+
+XINCPATH = -I. -I$(srcdir)/. -I../../../servers/slapd
+XDEFS = $(MODULES_CPPFLAGS)
diff -urN openldap-2.4.25/contrib/slapd-modules/allop/Makefile.in openldap-2.4.25-contrib/contrib/slapd-modules/allop/Makefile.in
--- openldap-2.4.25/contrib/slapd-modules/allop/Makefile.in	1970-01-01 01:00:00.000000000 +0100
+++ openldap-2.4.25-contrib/contrib/slapd-modules/allop/Makefile.in	2011-03-28 19:59:06.534991161 +0200
@@ -0,0 +1,22 @@
+BUILD_MOD = mod
+
+SRCS = allop.c
+
+OBJS = allop.lo
+
+LIBBASE = allop
+
+LDAP_INCDIR= ../../../include       
+LDAP_LIBDIR= ../../../libraries
+
+MOD_DEFS = -DSLAPD_IMPORT
+#MOD_LIBS = 
+
+shared_LDAP_LIBS = $(LDAP_LIBLDAP_R_LA) $(LDAP_LIBLBER_LA)
+NT_LINK_LIBS = -L.. -lslapd $(@BUILD_LIBS_DYNAMIC@_LDAP_LIBS)
+UNIX_LINK_LIBS = $(@BUILD_LIBS_DYNAMIC@_LDAP_LIBS)
+
+XINCPATH = -I. -I$(srcdir)/. -I../../../servers/slapd
+XDEFS = $(MODULES_CPPFLAGS)
+
+MANSECT=5
diff -urN openldap-2.4.25/contrib/slapd-modules/allowed/Makefile openldap-2.4.25-contrib/contrib/slapd-modules/allowed/Makefile
--- openldap-2.4.25/contrib/slapd-modules/allowed/Makefile	2011-01-05 00:49:30.000000000 +0100
+++ openldap-2.4.25-contrib/contrib/slapd-modules/allowed/Makefile	1970-01-01 01:00:00.000000000 +0100
@@ -1,46 +0,0 @@
-# $OpenLDAP: pkg/ldap/contrib/slapd-modules/allowed/Makefile,v 1.1.2.4 2011/01/04 23:49:30 kurt Exp $
-# This work is part of OpenLDAP Software <http://www.openldap.org/>.
-#
-# Copyright 1998-2011 The OpenLDAP Foundation.
-# Copyright 2004 Howard Chu, Symas Corp. All Rights Reserved.
-#
-# Redistribution and use in source and binary forms, with or without
-# modification, are permitted only as authorized by the OpenLDAP
-# Public License.
-#
-# A copy of this license is available in the file LICENSE in the
-# top-level directory of the distribution or, alternatively, at
-# <http://www.OpenLDAP.org/license.html>.
-
-PREFIX=/opt/openldap-HEAD
-
-LIBTOOL=../../../libtool
-OPT=-g -O2
-CC=gcc
-
-DEFS=-DSLAPD_OVER_ALLOWED=SLAPD_MOD_DYNAMIC
-
-LDAP_INC=-I../../../include -I../../../servers/slapd
-INCS=$(LDAP_INC)
-
-LDAP_LIB=-lldap_r -llber -L../../../lib
-LDAP_LIB=
-LIBS=$(LDAP_LIB)
-
-all:	allowed.la
-
-
-allowed.lo:	allowed.c
-	$(LIBTOOL) --mode=compile $(CC) $(OPT) $(DEFS) $(INCS) -c $?
-
-allowed.la:	allowed.lo
-	$(LIBTOOL) --mode=link $(CC) $(OPT) -version-info 0:0:0 \
-	-rpath $(PREFIX)/lib -module -o $@ $? $(LIBS)
-
-clean:
-	rm -f allowed.o allowed.lo allowed.la
-
-install: allowed.la
-	mkdir -p $(PREFIX)/libexec/openldap
-	$(LIBTOOL) --mode=install cp allowed.la $(PREFIX)/libexec/openldap
-	$(LIBTOOL) --finish $(PREFIX)/libexec/openldap
diff -urN openldap-2.4.25/contrib/slapd-modules/allowed/Makefile.in openldap-2.4.25-contrib/contrib/slapd-modules/allowed/Makefile.in
--- openldap-2.4.25/contrib/slapd-modules/allowed/Makefile.in	1970-01-01 01:00:00.000000000 +0100
+++ openldap-2.4.25-contrib/contrib/slapd-modules/allowed/Makefile.in	2011-03-28 17:51:20.127152000 +0200
@@ -0,0 +1,20 @@
+BUILD_MOD = mod
+
+SRCS = allowed.c
+
+OBJS = allowed.lo
+
+LIBBASE = allowed
+
+LDAP_INCDIR= ../../../include       
+LDAP_LIBDIR= ../../../libraries
+
+MOD_DEFS = -DSLAPD_IMPORT -DSLAPD_OVER_ALLOWED=SLAPD_MOD_DYNAMIC
+#MOD_LIBS = 
+
+shared_LDAP_LIBS = $(LDAP_LIBLDAP_R_LA) $(LDAP_LIBLBER_LA)
+NT_LINK_LIBS = -L.. -lslapd $(@BUILD_LIBS_DYNAMIC@_LDAP_LIBS)
+UNIX_LINK_LIBS = $(@BUILD_LIBS_DYNAMIC@_LDAP_LIBS)
+
+XINCPATH = -I. -I$(srcdir)/. -I../../../servers/slapd
+XDEFS = $(MODULES_CPPFLAGS)
diff -urN openldap-2.4.25/contrib/slapd-modules/autogroup/Makefile openldap-2.4.25-contrib/contrib/slapd-modules/autogroup/Makefile
--- openldap-2.4.25/contrib/slapd-modules/autogroup/Makefile	2011-01-04 20:29:39.000000000 +0100
+++ openldap-2.4.25-contrib/contrib/slapd-modules/autogroup/Makefile	1970-01-01 01:00:00.000000000 +0100
@@ -1,27 +0,0 @@
-LIBTOOL=../../../libtool
-
-CPPFLAGS+=-I../../../include -I../../../servers/slapd
-
-ldap_subdir = openldap
-prefix=/usr/local
-exec_prefix = $(prefix)
-libdir = $(exec_prefix)/lib
-libexecdir = $(exec_prefix)/libexec
-moduledir = $(exec_prefix)/libexec/$(ldap_subdir)
-
-all: autogroup.la
-
-autogroup.lo:	autogroup.c
-	$(LIBTOOL) --mode=compile $(CC) $(CPPFLAGS) -Wall -c $?
-
-autogroup.la:	autogroup.lo
-	$(LIBTOOL) --mode=link $(CC) -version-info 0:0:0 \
-	-rpath $(libdir) -module -o $@ $? 
-
-clean:
-	rm -f autogroup.lo autogroup.la
-
-install: autogroup.la
-	mkdir -p $(DESTDIR)$(moduledir)
-	$(LIBTOOL) --mode=install cp autogroup.la $(DESTDIR)$(moduledir)
-	$(LIBTOOL) --finish $(DESTDIR)$(moduledir)
diff -urN openldap-2.4.25/contrib/slapd-modules/autogroup/Makefile.in openldap-2.4.25-contrib/contrib/slapd-modules/autogroup/Makefile.in
--- openldap-2.4.25/contrib/slapd-modules/autogroup/Makefile.in	1970-01-01 01:00:00.000000000 +0100
+++ openldap-2.4.25-contrib/contrib/slapd-modules/autogroup/Makefile.in	2011-03-28 17:51:20.127152000 +0200
@@ -0,0 +1,20 @@
+BUILD_MOD = mod
+
+SRCS = autogroup.c
+
+OBJS = autogroup.lo
+
+LIBBASE = autogroup
+
+LDAP_INCDIR= ../../../include       
+LDAP_LIBDIR= ../../../libraries
+
+MOD_DEFS = -DSLAPD_IMPORT
+#MOD_LIBS = 
+
+shared_LDAP_LIBS = $(LDAP_LIBLDAP_R_LA) $(LDAP_LIBLBER_LA)
+NT_LINK_LIBS = -L.. -lslapd $(@BUILD_LIBS_DYNAMIC@_LDAP_LIBS)
+UNIX_LINK_LIBS = $(@BUILD_LIBS_DYNAMIC@_LDAP_LIBS)
+
+XINCPATH = -I. -I$(srcdir)/. -I../../../servers/slapd
+XDEFS = $(MODULES_CPPFLAGS)
diff -urN openldap-2.4.25/contrib/slapd-modules/cloak/Makefile openldap-2.4.25-contrib/contrib/slapd-modules/cloak/Makefile
--- openldap-2.4.25/contrib/slapd-modules/cloak/Makefile	2011-03-24 19:15:01.000000000 +0100
+++ openldap-2.4.25-contrib/contrib/slapd-modules/cloak/Makefile	1970-01-01 01:00:00.000000000 +0100
@@ -1,17 +0,0 @@
-# $OpenLDAP: pkg/ldap/contrib/slapd-modules/cloak/Makefile,v 1.2.2.2 2011/03/24 18:15:01 quanah Exp $
-CPPFLAGS+=-I../../../include -I../../../servers/slapd 
-CPPFLAGS+=-DSLAPD_OVER_CLOAK=SLAPD_MOD_DYNAMIC
-LIBS=-lldap_r -llber -lcrypto
-LIBTOOL=../../../libtool
-
-all: cloak.la
-
-cloak.lo:    cloak.c
-	$(LIBTOOL) --mode=compile $(CC) $(CPPFLAGS) -c $?
-
-cloak.la:    cloak.lo
-	$(LIBTOOL) --mode=link $(CC) -version-info 0:0:0 \
-		   -rpath $(PREFIX)/lib -module -o $@ $? $(LIBS)
-
-clean:
-	rm cloak.lo cloak.la
diff -urN openldap-2.4.25/contrib/slapd-modules/cloak/Makefile.in openldap-2.4.25-contrib/contrib/slapd-modules/cloak/Makefile.in
--- openldap-2.4.25/contrib/slapd-modules/cloak/Makefile.in	1970-01-01 01:00:00.000000000 +0100
+++ openldap-2.4.25-contrib/contrib/slapd-modules/cloak/Makefile.in	2011-03-28 19:59:11.461991161 +0200
@@ -0,0 +1,22 @@
+BUILD_MOD = mod
+
+SRCS = cloak.c
+
+OBJS = cloak.lo
+
+LIBBASE = cloak
+
+LDAP_INCDIR= ../../../include       
+LDAP_LIBDIR= ../../../libraries
+
+MOD_DEFS = -DSLAPD_IMPORT -DSLAPD_OVER_CLOAK=SLAPD_MOD_DYNAMIC
+#MOD_LIBS = 
+
+shared_LDAP_LIBS = $(LDAP_LIBLDAP_R_LA) $(LDAP_LIBLBER_LA)
+NT_LINK_LIBS = -L.. -lslapd $(@BUILD_LIBS_DYNAMIC@_LDAP_LIBS)
+UNIX_LINK_LIBS = $(@BUILD_LIBS_DYNAMIC@_LDAP_LIBS)
+
+XINCPATH = -I. -I$(srcdir)/. -I../../../servers/slapd
+XDEFS = $(MODULES_CPPFLAGS)
+
+MANSECT=5
diff -urN openldap-2.4.25/contrib/slapd-modules/comp_match/Makefile openldap-2.4.25-contrib/contrib/slapd-modules/comp_match/Makefile
--- openldap-2.4.25/contrib/slapd-modules/comp_match/Makefile	2011-01-05 00:49:31.000000000 +0100
+++ openldap-2.4.25-contrib/contrib/slapd-modules/comp_match/Makefile	1970-01-01 01:00:00.000000000 +0100
@@ -1,66 +0,0 @@
-# $OpenLDAP: pkg/ldap/contrib/slapd-modules/comp_match/Makefile,v 1.11.2.6 2011/01/04 23:49:31 kurt Exp $
-# This work is part of OpenLDAP Software <http://www.openldap.org/>.
-#
-# Copyright 2003-2011 The OpenLDAP Foundation.
-# Portions Copyright 2004 by IBM Corporation.
-# All rights reserved.
-
-# Copyright 2004 Sang Seok Lim, IBM Corp. All Rights Reserved.
-#
-# Redistribution and use in source and binary forms, with or without
-# modification, are permitted only as authorized by the OpenLDAP
-# Public License.
-#
-# A copy of this license is available in the file LICENSE in the
-# top-level directory of the distribution or, alternatively, at
-# <http://www.OpenLDAP.org/license.html>.
-
-topsrcdir = ../../..
-snaccdir = ../$(topsrcdir)/snacc
-openssldir = /usr/local/include/openssl
-
-LIBTOOL=$(topsrcdir)/libtool
-OPT=-g -O2 -DLDAP_COMPONENT
-CC=gcc
-
-SNACC_INC=-I$(snaccdir) -I$(snaccdir)/c-lib/inc
-LDAP_INC=-I$(topsrcdir)/include -I$(topsrcdir)/servers/slapd -I$(topbuilddir)/include
-OPENSSL_INC=-I$(openssldir)
-INCS=$(LDAP_INC) $(SNACC_INC) $(OPENSSL_INC)
-
-SNACC_LIB=$(snaccdir)/c-lib/libcasn1.a
-SSL_LIB=/usr/local/lib/lcrypto
-
-LIBS=$(LDAP_LIB) $(SNACC_LIB) $(SSL_LIB)
-
-all:	compmatch.la
-
-
-componentlib.lo:	componentlib.c
-	$(LIBTOOL) --mode=compile $(CC) $(OPT) $(INCS) -c $?
-
-certificate.lo:	certificate.c
-	$(LIBTOOL) --mode=compile $(CC) $(OPT) $(INCS) -c $?
-
-crl.lo:	crl.c
-	$(LIBTOOL) --mode=compile $(CC) $(OPT) $(INCS) -c $?
-
-authorityKeyIdentifier.lo:	authorityKeyIdentifier.c
-	$(LIBTOOL) --mode=compile $(CC) $(OPT) $(INCS) -c $?
-
-asn_to_syn_mr.lo:	asn_to_syn_mr.c
-	$(LIBTOOL) --mode=compile $(CC) $(OPT) $(INCS) -c $?
-
-init.lo:	init.c
-	$(LIBTOOL) --mode=compile $(CC) $(OPT) $(INCS) -c $?
-
-compmatch.la:	componentlib.lo init.lo certificate.lo asn_to_syn_mr.lo authorityKeyIdentifier.lo crl.lo
-	$(LIBTOOL) --mode=link $(CC) $(OPT) $(LIBS) -version-info 0:0:0 \
-	-rpath /usr/local/libexec/openldap -module -o $@ $? $(LIBS)
-
-clean:
-	\rm compmatch.la componentlib.lo certificate.lo asn_to_syn_mr.lo authorityKeyIdentifier.lo crl.lo\
-		init.o init.lo componentlib.o certificate.o asn_to_syn_mr.o authorityKeyIdentifier.o crl.o
-install:
-	cp -r .libs $(topsrcdir)/tests/data/comp_libs
-	cp compmatch.la  $(topsrcdir)/tests/data/comp_libs
diff -urN openldap-2.4.25/contrib/slapd-modules/comp_match/Makefile.in openldap-2.4.25-contrib/contrib/slapd-modules/comp_match/Makefile.in
--- openldap-2.4.25/contrib/slapd-modules/comp_match/Makefile.in	1970-01-01 01:00:00.000000000 +0100
+++ openldap-2.4.25-contrib/contrib/slapd-modules/comp_match/Makefile.in	2011-03-28 17:51:20.128152000 +0200
@@ -0,0 +1,28 @@
+BUILD_MOD = mod
+
+SRCS = asn_to_syn_mr.c authorityKeyIdentifier.c certificate.c \
+	componentlib.c crl.c init.c
+
+OBJS = asn_to_syn_mr.lo authorityKeyIdentifier.lo certificate.lo \
+	componentlib.lo crl.lo init.lo
+
+LIBBASE = compmatch
+
+OPENSSL_INC = -I/usr/include/openssl
+OPENSSL_LIBS = -lcrypto
+
+SNACC_INC =-I/usr/include/snacc -I/usr/include/snacc/c-lib/inc
+SNACC_LIBS = -lcasn1
+
+LDAP_INCDIR= ../../../include       
+LDAP_LIBDIR= ../../../libraries
+
+MOD_DEFS = -DSLAPD_IMPORT -DLDAP_COMPONENT $(OPENSSL_INC) $(SNACC_INC)
+MOD_LIBS = $(OPENSSL_LIBS) $(SNACC_LIBS)
+
+shared_LDAP_LIBS = $(LDAP_LIBLDAP_R_LA) $(LDAP_LIBLBER_LA)
+NT_LINK_LIBS = -L.. -lslapd $(@BUILD_LIBS_DYNAMIC@_LDAP_LIBS)
+UNIX_LINK_LIBS = $(@BUILD_LIBS_DYNAMIC@_LDAP_LIBS)
+
+XINCPATH = -I. -I$(srcdir)/. -I../../../servers/slapd
+XDEFS = $(MODULES_CPPFLAGS)
diff -urN openldap-2.4.25/contrib/slapd-modules/denyop/Makefile.in openldap-2.4.25-contrib/contrib/slapd-modules/denyop/Makefile.in
--- openldap-2.4.25/contrib/slapd-modules/denyop/Makefile.in	1970-01-01 01:00:00.000000000 +0100
+++ openldap-2.4.25-contrib/contrib/slapd-modules/denyop/Makefile.in	2011-03-28 17:51:20.128152000 +0200
@@ -0,0 +1,20 @@
+BUILD_MOD = mod
+
+SRCS = denyop.c
+
+OBJS = denyop.lo
+
+LIBBASE = denyop
+
+LDAP_INCDIR= ../../../include       
+LDAP_LIBDIR= ../../../libraries
+
+MOD_DEFS = -DSLAPD_IMPORT -DSLAPD_OVER_DENYOP=SLAPD_MOD_DYNAMIC
+#MOD_LIBS = 
+
+shared_LDAP_LIBS = $(LDAP_LIBLDAP_R_LA) $(LDAP_LIBLBER_LA)
+NT_LINK_LIBS = -L.. -lslapd $(@BUILD_LIBS_DYNAMIC@_LDAP_LIBS)
+UNIX_LINK_LIBS = $(@BUILD_LIBS_DYNAMIC@_LDAP_LIBS)
+
+XINCPATH = -I. -I$(srcdir)/. -I../../../servers/slapd
+XDEFS = $(MODULES_CPPFLAGS)
diff -urN openldap-2.4.25/contrib/slapd-modules/dsaschema/Makefile.in openldap-2.4.25-contrib/contrib/slapd-modules/dsaschema/Makefile.in
--- openldap-2.4.25/contrib/slapd-modules/dsaschema/Makefile.in	1970-01-01 01:00:00.000000000 +0100
+++ openldap-2.4.25-contrib/contrib/slapd-modules/dsaschema/Makefile.in	2011-03-28 17:51:20.129152000 +0200
@@ -0,0 +1,20 @@
+BUILD_MOD = mod
+
+SRCS = dsaschema.c
+
+OBJS = dsaschema.lo
+
+LIBBASE = dsaschema
+
+LDAP_INCDIR= ../../../include       
+LDAP_LIBDIR= ../../../libraries
+
+MOD_DEFS = -DSLAPD_IMPORT
+#MOD_LIBS = 
+
+shared_LDAP_LIBS = $(LDAP_LIBLDAP_R_LA) $(LDAP_LIBLBER_LA)
+NT_LINK_LIBS = -L.. -lslapd $(@BUILD_LIBS_DYNAMIC@_LDAP_LIBS)
+UNIX_LINK_LIBS = $(@BUILD_LIBS_DYNAMIC@_LDAP_LIBS)
+
+XINCPATH = -I. -I$(srcdir)/. -I../../../servers/slapd
+XDEFS = $(MODULES_CPPFLAGS)
diff -urN openldap-2.4.25/contrib/slapd-modules/dupent/Makefile openldap-2.4.25-contrib/contrib/slapd-modules/dupent/Makefile
--- openldap-2.4.25/contrib/slapd-modules/dupent/Makefile	2011-01-05 00:49:32.000000000 +0100
+++ openldap-2.4.25-contrib/contrib/slapd-modules/dupent/Makefile	1970-01-01 01:00:00.000000000 +0100
@@ -1,52 +0,0 @@
-# $OpenLDAP: pkg/ldap/contrib/slapd-modules/dupent/Makefile,v 1.1.2.3 2011/01/04 23:49:32 kurt Exp $
-# This work is part of OpenLDAP Software <http://www.openldap.org/>.
-#
-# Copyright 1998-2011 The OpenLDAP Foundation.
-# Copyright 2004 Howard Chu, Symas Corp. All Rights Reserved.
-#
-# Redistribution and use in source and binary forms, with or without
-# modification, are permitted only as authorized by the OpenLDAP
-# Public License.
-#
-# A copy of this license is available in the file LICENSE in the
-# top-level directory of the distribution or, alternatively, at
-# <http://www.OpenLDAP.org/license.html>.
-
-LIBTOOL=../../../libtool
-OPT=-DSLAPD_OVER_DUPENT=2 -g -O2
-#LIBTOOL=../../../../ldap-devel/libtool
-#OPT=-DSLAPD_OVER_DUPENT=2 -g -O0
-CC=gcc
-
-LDAP_INC=-I../../../include -I../../../servers/slapd
-#LDAP_INC=-I../../../include -I../../../servers/slapd -I../../../../ldap-devel/include
-INCS=$(LDAP_INC)
-
-LDAP_LIB=-lldap_r -llber
-LIBS=$(LDAP_LIB)
-
-prefix=/usr/local
-exec_prefix=$(prefix)
-ldap_subdir=/openldap
-
-libdir=$(exec_prefix)/lib
-libexecdir=$(exec_prefix)/libexec
-moduledir = $(libexecdir)$(ldap_subdir)
-
-all:	dupent.la
-
-
-dupent.lo:	dupent.c
-	$(LIBTOOL) --mode=compile $(CC) $(OPT) $(DEFS) $(INCS) -c $?
-
-dupent.la:	dupent.lo
-	$(LIBTOOL) --mode=link $(CC) $(OPT) -version-info 0:0:0 \
-	-rpath $(moduledir) -module -o $@ $? $(LIBS)
-
-clean:
-	rm -f dupent.lo dupent.la
-
-install: dupent.la
-	mkdir -p $(DESTDIR)$(moduledir)
-	$(LIBTOOL) --mode=install cp dupent.la $(DESTDIR)$(moduledir)
-
diff -urN openldap-2.4.25/contrib/slapd-modules/dupent/Makefile.in openldap-2.4.25-contrib/contrib/slapd-modules/dupent/Makefile.in
--- openldap-2.4.25/contrib/slapd-modules/dupent/Makefile.in	1970-01-01 01:00:00.000000000 +0100
+++ openldap-2.4.25-contrib/contrib/slapd-modules/dupent/Makefile.in	2011-03-28 17:51:20.133152000 +0200
@@ -0,0 +1,20 @@
+BUILD_MOD = mod
+
+SRCS = dupent.c
+
+OBJS = dupent.lo
+
+LIBBASE = dupent
+
+LDAP_INCDIR= ../../../include       
+LDAP_LIBDIR= ../../../libraries
+
+MOD_DEFS = -DSLAPD_IMPORT -DSLAPD_OVER_DUPENT=SLAPD_MOD_DYNAMIC
+#MOD_LIBS = 
+
+shared_LDAP_LIBS = $(LDAP_LIBLDAP_R_LA) $(LDAP_LIBLBER_LA)
+NT_LINK_LIBS = -L.. -lslapd $(@BUILD_LIBS_DYNAMIC@_LDAP_LIBS)
+UNIX_LINK_LIBS = $(@BUILD_LIBS_DYNAMIC@_LDAP_LIBS)
+
+XINCPATH = -I. -I$(srcdir)/. -I../../../servers/slapd
+XDEFS = $(MODULES_CPPFLAGS)
diff -urN openldap-2.4.25/contrib/slapd-modules/kinit/Makefile.in openldap-2.4.25-contrib/contrib/slapd-modules/kinit/Makefile.in
--- openldap-2.4.25/contrib/slapd-modules/kinit/Makefile.in	1970-01-01 01:00:00.000000000 +0100
+++ openldap-2.4.25-contrib/contrib/slapd-modules/kinit/Makefile.in	2011-03-28 17:51:20.134152000 +0200
@@ -0,0 +1,23 @@
+BUILD_MOD = mod
+
+SRCS = kinit.c
+
+OBJS = kinit.lo
+
+LIBBASE = kinit
+
+LDAP_INCDIR= ../../../include       
+LDAP_LIBDIR= ../../../libraries
+
+KRB5_INC = -I/usr/include/krb5
+KRB5_LIBS = -lkrb5
+
+MOD_DEFS = -DSLAPD_IMPORT $(KRB5_INC)
+MOD_LIBS = $(KRB5_LIBS)
+
+shared_LDAP_LIBS = $(LDAP_LIBLDAP_R_LA) $(LDAP_LIBLBER_LA)
+NT_LINK_LIBS = -L.. -lslapd $(@BUILD_LIBS_DYNAMIC@_LDAP_LIBS)
+UNIX_LINK_LIBS = $(@BUILD_LIBS_DYNAMIC@_LDAP_LIBS)
+
+XINCPATH = -I. -I$(srcdir)/. -I../../../servers/slapd
+XDEFS = $(MODULES_CPPFLAGS)
diff -urN openldap-2.4.25/contrib/slapd-modules/lastbind/Makefile openldap-2.4.25-contrib/contrib/slapd-modules/lastbind/Makefile
--- openldap-2.4.25/contrib/slapd-modules/lastbind/Makefile	2011-03-25 20:39:47.000000000 +0100
+++ openldap-2.4.25-contrib/contrib/slapd-modules/lastbind/Makefile	1970-01-01 01:00:00.000000000 +0100
@@ -1,34 +0,0 @@
-# $OpenLDAP: pkg/ldap/contrib/slapd-modules/lastbind/Makefile,v 1.2.2.4 2011/03/25 19:39:47 quanah Exp $
-# Copyright 2009 Jonathan Clarke <jonathan@phillipoux.net>.
-# All rights reserved.
-#
-# Redistribution and use in source and binary forms, with or without
-# modification, are permitted only as authorized by the OpenLDAP
-# Public License.
-#
-# A copy of this license is available in the file LICENSE in the
-# top-level directory of the distribution or, alternatively, at
-# <http://www.OpenLDAP.org/license.html>.
-
-CPPFLAGS+=-I../../../include -I../../../servers/slapd 
-CPPFLAGS+=-DSLAPD_OVER_LASTBIND=SLAPD_MOD_DYNAMIC
-#LIBTOOL=libtool
-LIBTOOL=../../../libtool
-
-prefix=/usr/local
-
-all: lastbind.la
-
-lastbind.lo:    lastbind.c
-	$(LIBTOOL) --mode=compile $(CC) $(CPPFLAGS) -Wall -c $?
-
-lastbind.la:    lastbind.lo
-	$(LIBTOOL) --mode=link $(CC) -version-info 0:0:0 \
-		   -rpath $(prefix)/lib -module -o $@ $?
-
-clean:
-	rm -rf lastbind.lo lastbind.la lastbind.o .libs/
-
-install: lastbind.la
-	mkdir -p $(prefix)/libexec/openldap
-	$(LIBTOOL) --mode=install cp lastbind.la $(prefix)/libexec/openldap
diff -urN openldap-2.4.25/contrib/slapd-modules/lastbind/Makefile.in openldap-2.4.25-contrib/contrib/slapd-modules/lastbind/Makefile.in
--- openldap-2.4.25/contrib/slapd-modules/lastbind/Makefile.in	1970-01-01 01:00:00.000000000 +0100
+++ openldap-2.4.25-contrib/contrib/slapd-modules/lastbind/Makefile.in	2011-03-28 19:59:18.355991161 +0200
@@ -0,0 +1,22 @@
+BUILD_MOD = mod
+
+SRCS = lastbind.c
+
+OBJS = lastbind.lo
+
+LIBBASE = lastbind
+
+LDAP_INCDIR= ../../../include       
+LDAP_LIBDIR= ../../../libraries
+
+MOD_DEFS = -DSLAPD_IMPORT -DSLAPD_OVER_LASTBIND=SLAPD_MOD_DYNAMIC
+#MOD_LIBS = 
+
+shared_LDAP_LIBS = $(LDAP_LIBLDAP_R_LA) $(LDAP_LIBLBER_LA)
+NT_LINK_LIBS = -L.. -lslapd $(@BUILD_LIBS_DYNAMIC@_LDAP_LIBS)
+UNIX_LINK_LIBS = $(@BUILD_LIBS_DYNAMIC@_LDAP_LIBS)
+
+XINCPATH = -I. -I$(srcdir)/. -I../../../servers/slapd
+XDEFS = $(MODULES_CPPFLAGS)
+
+MANSECT=5
diff -urN openldap-2.4.25/contrib/slapd-modules/lastmod/Makefile.in openldap-2.4.25-contrib/contrib/slapd-modules/lastmod/Makefile.in
--- openldap-2.4.25/contrib/slapd-modules/lastmod/Makefile.in	1970-01-01 01:00:00.000000000 +0100
+++ openldap-2.4.25-contrib/contrib/slapd-modules/lastmod/Makefile.in	2011-03-28 19:59:21.783991161 +0200
@@ -0,0 +1,22 @@
+BUILD_MOD = mod
+
+SRCS = lastmod.c
+
+OBJS = lastmod.lo
+
+LIBBASE = lastmod
+
+LDAP_INCDIR= ../../../include       
+LDAP_LIBDIR= ../../../libraries
+
+MOD_DEFS = -DSLAPD_IMPORT -DSLAPD_OVER_LASTMOD=SLAPD_MOD_DYNAMIC
+#MOD_LIBS = 
+
+shared_LDAP_LIBS = $(LDAP_LIBLDAP_R_LA) $(LDAP_LIBLBER_LA)
+NT_LINK_LIBS = -L.. -lslapd $(@BUILD_LIBS_DYNAMIC@_LDAP_LIBS)
+UNIX_LINK_LIBS = $(@BUILD_LIBS_DYNAMIC@_LDAP_LIBS)
+
+XINCPATH = -I. -I$(srcdir)/. -I../../../servers/slapd
+XDEFS = $(MODULES_CPPFLAGS)
+
+MANSECT=5
diff -urN openldap-2.4.25/contrib/slapd-modules/Makefile.in openldap-2.4.25-contrib/contrib/slapd-modules/Makefile.in
--- openldap-2.4.25/contrib/slapd-modules/Makefile.in	1970-01-01 01:00:00.000000000 +0100
+++ openldap-2.4.25-contrib/contrib/slapd-modules/Makefile.in	2011-03-28 17:51:20.143152000 +0200
@@ -0,0 +1,23 @@
+# Do not build:
+#	acl comp_match passwd
+
+# Needs MIT kerberos:
+#	kinit
+
+SUBDIRS = addpartial \
+	allop \
+	allowed \
+	autogroup \
+	cloak \
+	denyop \
+	dsaschema \
+	dupent \
+	lastbind \
+	lastmod \
+	noopsrch \
+	nops \
+	nssov \
+	proxyOld \
+	samba4 \
+	smbk5pwd \
+	trace
diff -urN openldap-2.4.25/contrib/slapd-modules/noopsrch/Makefile openldap-2.4.25-contrib/contrib/slapd-modules/noopsrch/Makefile
--- openldap-2.4.25/contrib/slapd-modules/noopsrch/Makefile	2011-01-05 00:49:32.000000000 +0100
+++ openldap-2.4.25-contrib/contrib/slapd-modules/noopsrch/Makefile	1970-01-01 01:00:00.000000000 +0100
@@ -1,52 +0,0 @@
-# $OpenLDAP: pkg/ldap/contrib/slapd-modules/noopsrch/Makefile,v 1.1.2.3 2011/01/04 23:49:32 kurt Exp $
-# This work is part of OpenLDAP Software <http://www.openldap.org/>.
-#
-# Copyright 1998-2011 The OpenLDAP Foundation.
-# Copyright 2004 Howard Chu, Symas Corp. All Rights Reserved.
-#
-# Redistribution and use in source and binary forms, with or without
-# modification, are permitted only as authorized by the OpenLDAP
-# Public License.
-#
-# A copy of this license is available in the file LICENSE in the
-# top-level directory of the distribution or, alternatively, at
-# <http://www.OpenLDAP.org/license.html>.
-
-LIBTOOL=../../../libtool
-OPT=-DSLAPD_OVER_NOOPSRCH=2 -g -O2
-#LIBTOOL=../../../../ldap-devel/libtool
-#OPT=-DSLAPD_OVER_NOOPSRCH=2 -g -O0
-CC=gcc
-
-LDAP_INC=-I../../../include -I../../../servers/slapd
-#LDAP_INC=-I../../../include -I../../../servers/slapd -I../../../../ldap-devel/include
-INCS=$(LDAP_INC)
-
-LDAP_LIB=-lldap_r -llber
-LIBS=$(LDAP_LIB)
-
-prefix=/usr/local
-exec_prefix=$(prefix)
-ldap_subdir=/openldap
-
-libdir=$(exec_prefix)/lib
-libexecdir=$(exec_prefix)/libexec
-moduledir = $(libexecdir)$(ldap_subdir)
-
-all:	noopsrch.la
-
-
-noopsrch.lo:	noopsrch.c
-	$(LIBTOOL) --mode=compile $(CC) $(OPT) $(DEFS) $(INCS) -c $?
-
-noopsrch.la:	noopsrch.lo
-	$(LIBTOOL) --mode=link $(CC) $(OPT) -version-info 0:0:0 \
-	-rpath $(moduledir) -module -o $@ $? $(LIBS)
-
-clean:
-	rm -f noopsrch.lo noopsrch.la
-
-install: noopsrch.la
-	mkdir -p $(DESTDIR)$(moduledir)
-	$(LIBTOOL) --mode=install cp noopsrch.la $(DESTDIR)$(moduledir)
-
diff -urN openldap-2.4.25/contrib/slapd-modules/noopsrch/Makefile.in openldap-2.4.25-contrib/contrib/slapd-modules/noopsrch/Makefile.in
--- openldap-2.4.25/contrib/slapd-modules/noopsrch/Makefile.in	1970-01-01 01:00:00.000000000 +0100
+++ openldap-2.4.25-contrib/contrib/slapd-modules/noopsrch/Makefile.in	2011-03-28 17:51:20.144152000 +0200
@@ -0,0 +1,20 @@
+BUILD_MOD = mod
+
+SRCS = noopsrch.c
+
+OBJS = noopsrch.lo
+
+LIBBASE = noopsrch
+
+LDAP_INCDIR= ../../../include       
+LDAP_LIBDIR= ../../../libraries
+
+MOD_DEFS = -DSLAPD_IMPORT -DSLAPD_OVER_NOOPSRCH=SLAPD_MOD_DYNAMIC
+#MOD_LIBS = 
+
+shared_LDAP_LIBS = $(LDAP_LIBLDAP_R_LA) $(LDAP_LIBLBER_LA)
+NT_LINK_LIBS = -L.. -lslapd $(@BUILD_LIBS_DYNAMIC@_LDAP_LIBS)
+UNIX_LINK_LIBS = $(@BUILD_LIBS_DYNAMIC@_LDAP_LIBS)
+
+XINCPATH = -I. -I$(srcdir)/. -I../../../servers/slapd
+XDEFS = $(MODULES_CPPFLAGS)
diff -urN openldap-2.4.25/contrib/slapd-modules/nops/Makefile openldap-2.4.25-contrib/contrib/slapd-modules/nops/Makefile
--- openldap-2.4.25/contrib/slapd-modules/nops/Makefile	2009-04-28 01:35:48.000000000 +0200
+++ openldap-2.4.25-contrib/contrib/slapd-modules/nops/Makefile	1970-01-01 01:00:00.000000000 +0100
@@ -1,23 +0,0 @@
-# $OpenLDAP: pkg/ldap/contrib/slapd-modules/nops/Makefile,v 1.1.2.4 2009/04/27 23:35:48 quanah Exp $
-CPPFLAGS+=-I../../../include -I../../../servers/slapd 
-CPPFLAGS+=-DSLAPD_OVER_NOPS=SLAPD_MOD_DYNAMIC
-LIBS=-L$(PREFIX)/lib -lldap_r -llber -lcrypto
-
-all: nops.la
-
-nops.lo:    nops.c
-	$(LIBTOOL) --mode=compile $(CC) $(CPPFLAGS) -c $?
-
-nops.la:    nops.lo
-	$(LIBTOOL) --mode=link $(CC) -version-info 0:0:0 \
-		   -rpath $(PREFIX)/lib -module -o $@ $? $(LIBS)
-
-clean:
-	rm -f nops.lo nops.la
-
-install: nops.la
-	mkdir -p $(PREFIX)/lib/openldap 
-	mkdir -p $(PREFIX)/man/man5
-	$(LIBTOOL) --mode=install cp nops.la $(PREFIX)/lib/openldap
-	$(LIBTOOL) --finish $(PREFIX)/lib
-	cp nops.5 $(PREFIX)/man/man5
diff -urN openldap-2.4.25/contrib/slapd-modules/nops/Makefile.in openldap-2.4.25-contrib/contrib/slapd-modules/nops/Makefile.in
--- openldap-2.4.25/contrib/slapd-modules/nops/Makefile.in	1970-01-01 01:00:00.000000000 +0100
+++ openldap-2.4.25-contrib/contrib/slapd-modules/nops/Makefile.in	2011-03-28 19:59:27.566991161 +0200
@@ -0,0 +1,22 @@
+BUILD_MOD = mod
+
+SRCS = nops.c
+
+OBJS = nops.lo
+
+LIBBASE = nops
+
+LDAP_INCDIR= ../../../include       
+LDAP_LIBDIR= ../../../libraries
+
+MOD_DEFS = -DSLAPD_IMPORT -DSLAPD_OVER_NOPS=SLAPD_MOD_DYNAMIC
+#MOD_LIBS = 
+
+shared_LDAP_LIBS = $(LDAP_LIBLDAP_R_LA) $(LDAP_LIBLBER_LA)
+NT_LINK_LIBS = -L.. -lslapd $(@BUILD_LIBS_DYNAMIC@_LDAP_LIBS)
+UNIX_LINK_LIBS = $(@BUILD_LIBS_DYNAMIC@_LDAP_LIBS)
+
+XINCPATH = -I. -I$(srcdir)/. -I../../../servers/slapd
+XDEFS = $(MODULES_CPPFLAGS)
+
+MANSECT=5
diff -urN openldap-2.4.25/contrib/slapd-modules/nssov/Makefile openldap-2.4.25-contrib/contrib/slapd-modules/nssov/Makefile
--- openldap-2.4.25/contrib/slapd-modules/nssov/Makefile	2011-01-05 00:49:33.000000000 +0100
+++ openldap-2.4.25-contrib/contrib/slapd-modules/nssov/Makefile	1970-01-01 01:00:00.000000000 +0100
@@ -1,71 +0,0 @@
-# $OpenLDAP: pkg/ldap/contrib/slapd-modules/nssov/Makefile,v 1.1.2.8 2011/01/04 23:49:33 kurt Exp $
-# This work is part of OpenLDAP Software <http://www.openldap.org/>.
-#
-# Copyright 2008-2011 The OpenLDAP Foundation.
-# Portions Copyright 2008 Howard Chu, Symas Corp. All Rights Reserved.
-#
-# Redistribution and use in source and binary forms, with or without
-# modification, are permitted only as authorized by the OpenLDAP
-# Public License.
-#
-# A copy of this license is available in the file LICENSE in the
-# top-level directory of the distribution or, alternatively, at
-# <http://www.OpenLDAP.org/license.html>.
-
-# Path to the OpenLDAP source tree
-LDAPSRC=../../..
-
-# Path to the OpenLDAP object tree - same as above unless
-# you're doing out-of-tree builds.
-LDAPOBJ=../../..
-
-LIBTOOL=$(LDAPOBJ)/libtool
-OPT=-g -O2
-CC=gcc
-
-LDAP_INC=-I$(LDAPOBJ)/include -I$(LDAPSRC)/include -I$(LDAPSRC)/servers/slapd
-NLDAPD_INC=-Inss-pam-ldapd
-INCS=$(LDAP_INC) $(NLDAPD_INC)
-
-LDAP_LIB=-lldap_r -llber
-LIBS=$(LDAP_LIB)
-
-prefix=/usr/local
-exec_prefix=$(prefix)
-ldap_subdir=/openldap
-
-libdir=$(exec_prefix)/lib
-libexecdir=$(exec_prefix)/libexec
-moduledir = $(libexecdir)$(ldap_subdir)
-sysconfdir = $(prefix)/etc$(ldap_subdir)
-schemadir = $(sysconfdir)/schema
-
-all:	nssov.la
-
-XOBJS = tio.lo
-
-OBJS = alias.lo ether.lo group.lo host.lo netgroup.lo network.lo \
-	nssov.lo passwd.lo protocol.lo rpc.lo service.lo shadow.lo pam.lo
-
-.SUFFIXES: .c .o .lo
-
-.c.lo:
-	$(LIBTOOL) --mode=compile $(CC) $(OPT) $(DEFS) $(INCS) -c $<
-
-tio.lo:	nss-pam-ldapd/tio.c
-	$(LIBTOOL) --mode=compile $(CC) $(OPT) $(DEFS) $(INCS) -c $?
-
-$(OBJS):	nssov.h
-
-nssov.la:	$(OBJS) $(XOBJS)
-	$(LIBTOOL) --mode=link $(CC) $(OPT) -version-info 0:0:0 \
-	-rpath $(libdir) -module -o $@ $(OBJS) $(XOBJS) $(LIBS)
-
-install: nssov.la
-	mkdir -p $(DESTDIR)$(moduledir)
-	$(LIBTOOL) --mode=install cp nssov.la $(DESTDIR)$(moduledir)
-	cp ldapns.schema $(DESTDIR)$(schemadir)
-
-clean:
-	rm -f *.*o *.la .libs/*
-	rm -rf .libs
diff -urN openldap-2.4.25/contrib/slapd-modules/nssov/Makefile.in openldap-2.4.25-contrib/contrib/slapd-modules/nssov/Makefile.in
--- openldap-2.4.25/contrib/slapd-modules/nssov/Makefile.in	1970-01-01 01:00:00.000000000 +0100
+++ openldap-2.4.25-contrib/contrib/slapd-modules/nssov/Makefile.in	2011-03-28 19:59:41.531991162 +0200
@@ -0,0 +1,34 @@
+BUILD_MOD = mod
+
+SRCS = nss-pam-ldapd/tio.c alias.c ether.c group.c host.c netgroup.c \
+	network.c nssov.c pam.c passwd.c protocol.c rpc.c service.c \
+	shadow.c
+
+OBJS = tio.lo alias.lo ether.lo group.lo host.lo netgroup.lo \
+	network.lo nssov.lo pam.lo passwd.lo protocol.lo rpc.lo service.lo \
+	shadow.lo
+
+LIBBASE = nssov
+
+LDAP_INCDIR= ../../../include       
+LDAP_LIBDIR= ../../../libraries
+
+MOD_DEFS = -DSLAPD_IMPORT -DSLAPD_OVER_NSSOV=SLAPD_MOD_DYNAMIC
+#MOD_LIBS = 
+
+shared_LDAP_LIBS = $(LDAP_LIBLDAP_R_LA) $(LDAP_LIBLBER_LA)
+NT_LINK_LIBS = -L.. -lslapd $(@BUILD_LIBS_DYNAMIC@_LDAP_LIBS)
+UNIX_LINK_LIBS = $(@BUILD_LIBS_DYNAMIC@_LDAP_LIBS)
+
+XINCPATH = -I. -I$(srcdir)/. -I../../../servers/slapd -I$(srcdir)/nss-pam-ldapd
+XDEFS = $(MODULES_CPPFLAGS)
+
+MANSECT=5
+
+tio.lo: nss-pam-ldapd/tio.c
+	$(LTCOMPILE_MOD) $<
+
+install-local: FORCE
+	$(MKDIR) $(DESTDIR)$(schemadir)
+	echo $(INSTALL) $(INSTALLFLAGS) -m 444 ldapns.schema $(DESTDIR)$(schemadir)
+	$(INSTALL) $(INSTALLFLAGS) -m 444 $(srcdir)/ldapns.schema $(DESTDIR)$(schemadir)
diff -urN openldap-2.4.25/contrib/slapd-modules/passwd/Makefile openldap-2.4.25-contrib/contrib/slapd-modules/passwd/Makefile
--- openldap-2.4.25/contrib/slapd-modules/passwd/Makefile	2009-04-28 03:06:14.000000000 +0200
+++ openldap-2.4.25-contrib/contrib/slapd-modules/passwd/Makefile	1970-01-01 01:00:00.000000000 +0100
@@ -1,37 +0,0 @@
-# $OpenLDAP: pkg/ldap/contrib/slapd-modules/passwd/Makefile,v 1.2.2.2 2009/04/28 01:06:14 quanah Exp $
-CPPFLAGS+=-I../../../include -I../../../servers/slapd
-
-all: kerberos.la netscape.la radius.la
-
-kerberos.lo:	kerberos.c
-	$(LIBTOOL) --mode=compile $(CC) $(CPPFLAGS) -DHAVE_KRB5 -Wall -c $?
-
-kerberos.la:	kerberos.lo
-	$(LIBTOOL) --mode=link $(CC) -version-info 0:0:0 \
-	-rpath $(PREFIX)/lib -module -o $@ $? -lkrb5
-
-netscape.lo:	netscape.c
-	$(LIBTOOL) --mode=compile $(CC) $(CPPFLAGS) -Wall -c $?
-
-netscape.la:	netscape.lo
-	$(LIBTOOL) --mode=link $(CC) -version-info 0:0:0 \
-	-rpath $(PREFIX)/lib -module -o $@ $? 
-
-radius.lo:	radius.c
-	$(LIBTOOL) --mode=compile $(CC) $(CPPFLAGS) -Wall -c $?
-
-radius.la:	radius.lo
-	$(LIBTOOL) --mode=link $(CC) -version-info 0:0:0 \
-	-rpath $(PREFIX)/lib -module -o $@ $? -lradius
-
-clean:
-	rm -f kerberos.lo kerberos.la
-	rm -f netscape.lo netscape.la
-	rm -f radius.lo radius.la
-
-install: kerberos.la netscape.la radius.la
-	mkdir -p $(PREFIX)/lib/openldap
-	$(LIBTOOL) --mode=install cp kerberos.la $(PREFIX)/lib/openldap
-	$(LIBTOOL) --mode=install cp netscape.la $(PREFIX)/lib/openldap
-	$(LIBTOOL) --mode=install cp radius.la $(PREFIX)/lib/openldap
-	$(LIBTOOL) --finish $(PREFIX)/lib
diff -urN openldap-2.4.25/contrib/slapd-modules/passwd/Makefile.in openldap-2.4.25-contrib/contrib/slapd-modules/passwd/Makefile.in
--- openldap-2.4.25/contrib/slapd-modules/passwd/Makefile.in	1970-01-01 01:00:00.000000000 +0100
+++ openldap-2.4.25-contrib/contrib/slapd-modules/passwd/Makefile.in	2011-03-28 17:51:20.148152000 +0200
@@ -0,0 +1,61 @@
+SRCS = kerberos.c netscape.c radius.c
+
+OBJS = kerberos.lo netscape.lo radius.lo
+
+LTONLY_MOD = $(LTONLY_mod)
+LDAP_INCDIR= ../../../include       
+LDAP_LIBDIR= ../../../libraries
+
+KRB5_DEFS = -DHAVE_KRB5
+KRB5_LIBS = -lkrb5
+
+RADIUS_LIBS = -lradius
+
+MOD_DEFS = -DSLAPD_IMPORT $(KRB5_DEFS)
+
+shared_LDAP_LIBS = $(LDAP_LIBLDAP_R_LA) $(LDAP_LIBLBER_LA)
+NT_LINK_LIBS = -L.. -lslapd $(@BUILD_LIBS_DYNAMIC@_LDAP_LIBS)
+UNIX_LINK_LIBS = $(@BUILD_LIBS_DYNAMIC@_LDAP_LIBS)
+
+LIBRARY = libpasswd.a
+PROGRAMS = kerberos.la netscape.la radius.la
+
+XINCPATH = -I.. -I$(srcdir)/.. -I../../../servers/slapd
+XDEFS = $(MODULES_CPPFLAGS)
+
+static:	$(LIBRARY)
+
+dynamic: $(PROGRAMS)
+
+kerberos.la : kerberos.lo
+	$(LTLINK_MOD) -module -o $@ kerberos.lo version.lo $(LINK_LIBS) $(KRB5_LIBS)
+
+netscape.la : netscape.lo
+	$(LTLINK_MOD) -module -o $@ netscape.lo version.lo $(LINK_LIBS)
+
+radius.la : radius.lo
+	$(LTLINK_MOD) -module -o $@ radius.lo version.lo $(LINK_LIBS) $(RADIUS_LIBS)
+
+install-local:	$(PROGRAMS)
+	@if test -n "$?" ; then \
+		$(MKDIR) $(DESTDIR)$(moduledir); \
+		$(LTINSTALL) $(INSTALLFLAGS) -m 755 $? $(DESTDIR)$(moduledir);\
+	fi
+
+MKDEPFLAG = -l
+
+.SUFFIXES: .c .o .lo
+
+.c.lo:
+	$(LTCOMPILE_MOD) $<
+
+$(LIBRARY): $(OBJS) version.lo
+	$(AR) rs $@ $(OBJS)
+
+# Must fixup depends for non-libtool objects
+depend-local: depend-common
+	@if test -n "$(OBJS)"; then \
+	OBJ2=`echo $(OBJS) $(OBJDEP) | $(SED) -e 's/\.o//g'`; \
+	SCR=''; for i in $$OBJ2; do SCR="$$SCR -e s/^$$i.lo:/$$i.o:/"; done; \
+	mv Makefile Makefile.bak; $(SED) $$SCR Makefile.bak > Makefile && \
+	$(RM) Makefile.bak; fi
diff -urN openldap-2.4.25/contrib/slapd-modules/proxyOld/Makefile openldap-2.4.25-contrib/contrib/slapd-modules/proxyOld/Makefile
--- openldap-2.4.25/contrib/slapd-modules/proxyOld/Makefile	2011-01-05 00:49:35.000000000 +0100
+++ openldap-2.4.25-contrib/contrib/slapd-modules/proxyOld/Makefile	1970-01-01 01:00:00.000000000 +0100
@@ -1,44 +0,0 @@
-# $OpenLDAP: pkg/ldap/contrib/slapd-modules/proxyOld/Makefile,v 1.1.2.3 2011/01/04 23:49:35 kurt Exp $
-# This work is part of OpenLDAP Software <http://www.openldap.org/>.
-#
-# Copyright 2005-2011 The OpenLDAP Foundation.
-# Portions Copyright 2005 Howard Chu, Symas Corp. All Rights Reserved.
-#
-# Redistribution and use in source and binary forms, with or without
-# modification, are permitted only as authorized by the OpenLDAP
-# Public License.
-#
-# A copy of this license is available in the file LICENSE in the
-# top-level directory of the distribution or, alternatively, at
-# <http://www.OpenLDAP.org/license.html>.
-#
-LIBTOOL=../../../libtool
-ROOT=../../../../..
-rundir=$(LIB)
-instdir=$(LIB)/openldap
-CFLAGS=-g -O2
-CC=$(C_CC)
-INSTALL=../../../build/shtool install -c
-LTVER=1:0:0
-
-INCS=-I../../../include -I../../../servers/slapd -I ../../../../../opt/symas/include
-
-LIBS=../../../libraries/libldap_r/libldap_r.la ../../../libraries/liblber/liblber.la
-
-all:	proxyOld.la
-
-proxyOld.lo:	proxyOld.c
-	$(LIBTOOL) --mode=compile $(CC) $(CFLAGS) $(DEFS) $(INCS) -c $?
-
-proxyOld.la:	proxyOld.lo
-	$(LIBTOOL) --mode=link $(CC) $(OPT) $(LDFLAGS) -version-info $(LTVER) \
-	-rpath $(rundir) -module -o $@ $? $(LIBS) $(LIBEXTRAS)
-
-install:
-	-mkdir $(DESTDIR)$(instdir)
-	$(LIBTOOL) --mode=install $(INSTALL) -m 644 proxyOld.la $(DESTDIR)$(instdir)
-
-clean:
-	rm -rf *.o *.lo *.la .libs .libt
-
-veryclean: clean
diff -urN openldap-2.4.25/contrib/slapd-modules/proxyOld/Makefile.in openldap-2.4.25-contrib/contrib/slapd-modules/proxyOld/Makefile.in
--- openldap-2.4.25/contrib/slapd-modules/proxyOld/Makefile.in	1970-01-01 01:00:00.000000000 +0100
+++ openldap-2.4.25-contrib/contrib/slapd-modules/proxyOld/Makefile.in	2011-03-28 17:51:20.149152000 +0200
@@ -0,0 +1,20 @@
+BUILD_MOD = mod
+
+SRCS = proxyOld.c
+
+OBJS = proxyOld.lo
+
+LIBBASE = proxyOld
+
+LDAP_INCDIR= ../../../include       
+LDAP_LIBDIR= ../../../libraries
+
+MOD_DEFS = -DSLAPD_IMPORT
+#MOD_LIBS = 
+
+shared_LDAP_LIBS = $(LDAP_LIBLDAP_R_LA) $(LDAP_LIBLBER_LA)
+NT_LINK_LIBS = -L.. -lslapd $(@BUILD_LIBS_DYNAMIC@_LDAP_LIBS)
+UNIX_LINK_LIBS = $(@BUILD_LIBS_DYNAMIC@_LDAP_LIBS)
+
+XINCPATH = -I. -I$(srcdir)/. -I../../../servers/slapd
+XDEFS = $(MODULES_CPPFLAGS)
diff -urN openldap-2.4.25/contrib/slapd-modules/samba4/Makefile openldap-2.4.25-contrib/contrib/slapd-modules/samba4/Makefile
--- openldap-2.4.25/contrib/slapd-modules/samba4/Makefile	2011-01-05 00:49:36.000000000 +0100
+++ openldap-2.4.25-contrib/contrib/slapd-modules/samba4/Makefile	1970-01-01 01:00:00.000000000 +0100
@@ -1,76 +0,0 @@
-# $OpenLDAP: pkg/ldap/contrib/slapd-modules/samba4/Makefile,v 1.3.2.4 2011/01/04 23:49:36 kurt Exp $
-# This work is part of OpenLDAP Software <http://www.openldap.org/>.
-#
-# Copyright 1998-2011 The OpenLDAP Foundation.
-# Copyright 2004 Howard Chu, Symas Corp. All Rights Reserved.
-#
-# Redistribution and use in source and binary forms, with or without
-# modification, are permitted only as authorized by the OpenLDAP
-# Public License.
-#
-# A copy of this license is available in the file LICENSE in the
-# top-level directory of the distribution or, alternatively, at
-# <http://www.OpenLDAP.org/license.html>.
-
-LDAP_SRC=../../..
-# craft according to your installation
-LDAP_BUILD=../../..
-
-LIBTOOL=$(LDAP_BUILD)/libtool
-OPT=-g -O2
-CC=gcc
-
-DEFS=-DSLAPD_OVER_RDNVAL=2 -DSLAPD_OVER_PGUID=2 -DSLAPD_OVER_VERNUM=2
-
-LDAP_INC=-I$(LDAP_SRC)/include -I$(LDAP_SRC)/servers/slapd \
-	-I$(LDAP_BUILD)/include
-INCS=$(LDAP_INC)
-
-LDAP_LIB=-lldap_r -llber
-LIBS=$(LDAP_LIB)
-
-prefix=/usr/local
-exec_prefix=$(prefix)
-ldap_subdir=/openldap
-
-libdir=$(exec_prefix)/lib
-libexecdir=$(exec_prefix)/libexec
-moduledir = $(libexecdir)$(ldap_subdir)
-
-PROGRAMS = pguid.la rdnval.la vernum.la
-
-all:	$(PROGRAMS)
-
-pguid.lo:	pguid.c
-	$(LIBTOOL) --mode=compile $(CC) $(OPT) $(DEFS) $(INCS) -c $?
-
-pguid.la:	pguid.lo
-	$(LIBTOOL) --mode=link $(CC) $(OPT) -version-info 0:0:0 \
-	-rpath $(moduledir) -module -o $@ $? $(LIBS)
-
-rdnval.lo:	rdnval.c
-	$(LIBTOOL) --mode=compile $(CC) $(OPT) $(DEFS) $(INCS) -c $?
-
-rdnval.la:	rdnval.lo
-	$(LIBTOOL) --mode=link $(CC) $(OPT) -version-info 0:0:0 \
-	-rpath $(moduledir) -module -o $@ $? $(LIBS)
-
-vernum.lo:	vernum.c
-	$(LIBTOOL) --mode=compile $(CC) $(OPT) $(DEFS) $(INCS) -c $?
-
-vernum.la:	vernum.lo
-	$(LIBTOOL) --mode=link $(CC) $(OPT) -version-info 0:0:0 \
-	-rpath $(moduledir) -module -o $@ $? $(LIBS)
-
-clean:
-	rm -f \
-		pguid.o pguid.lo pguid.la \
-		rdnval.o rdnval.lo rdnval.la \
-		vernum.o vernum.lo vernum.la
-
-install: $(PROGRAMS)
-	mkdir -p $(DESTDIR)$(moduledir)
-	for p in $(PROGRAMS) ; do \
-		$(LIBTOOL) --mode=install cp $$p $(DESTDIR)$(moduledir) ; \
-	done
-
diff -urN openldap-2.4.25/contrib/slapd-modules/samba4/Makefile.in openldap-2.4.25-contrib/contrib/slapd-modules/samba4/Makefile.in
--- openldap-2.4.25/contrib/slapd-modules/samba4/Makefile.in	1970-01-01 01:00:00.000000000 +0100
+++ openldap-2.4.25-contrib/contrib/slapd-modules/samba4/Makefile.in	2011-03-28 17:51:20.150152000 +0200
@@ -0,0 +1,59 @@
+SRCS = pguid.c rdnval.c vernum.c
+
+OBJS = pguid.lo rdnval.lo vernum.lo
+
+LTONLY_MOD = $(LTONLY_mod)
+LDAP_INCDIR= ../../../include       
+LDAP_LIBDIR= ../../../libraries
+
+MOD_DEFS = -DSLAPD_IMPORT \
+	-DSLAPD_OVER_RDNVAL=SLAPD_MOD_DYNAMIC \
+	-DSLAPD_OVER_PGUID=SLAPD_MOD_DYNAMIC \
+	-DSLAPD_OVER_VERNUM=SLAPD_MOD_DYNAMIC
+
+shared_LDAP_LIBS = $(LDAP_LIBLDAP_R_LA) $(LDAP_LIBLBER_LA)
+NT_LINK_LIBS = -L.. -lslapd $(@BUILD_LIBS_DYNAMIC@_LDAP_LIBS)
+UNIX_LINK_LIBS = $(@BUILD_LIBS_DYNAMIC@_LDAP_LIBS)
+
+LIBRARY = libsamba4.a
+PROGRAMS = pguid.la rdnval.la vernum.la
+
+XINCPATH = -I.. -I$(srcdir)/.. -I../../../servers/slapd
+XDEFS = $(MODULES_CPPFLAGS)
+
+static:	$(LIBRARY)
+
+dynamic: $(PROGRAMS)
+
+pguid.la : pguid.lo version.lo
+	$(LTLINK_MOD) -module -o $@ pguid.lo version.lo $(LINK_LIBS)
+
+rdnval.la : rdnval.lo version.lo
+	$(LTLINK_MOD) -module -o $@ rdnval.lo version.lo $(LINK_LIBS)
+
+vernum.la : vernum.lo version.lo
+	$(LTLINK_MOD) -module -o $@ vernum.lo version.lo $(LINK_LIBS)
+
+install-local:	$(PROGRAMS)
+	@if test -n "$?" ; then \
+		$(MKDIR) $(DESTDIR)$(moduledir); \
+		$(LTINSTALL) $(INSTALLFLAGS) -m 755 $? $(DESTDIR)$(moduledir);\
+	fi
+
+MKDEPFLAG = -l
+
+.SUFFIXES: .c .o .lo
+
+.c.lo:
+	$(LTCOMPILE_MOD) $<
+
+$(LIBRARY): $(OBJS) version.lo
+	$(AR) rs $@ $(OBJS)
+
+# Must fixup depends for non-libtool objects
+depend-local: depend-common
+	@if test -n "$(OBJS)"; then \
+	OBJ2=`echo $(OBJS) $(OBJDEP) | $(SED) -e 's/\.o//g'`; \
+	SCR=''; for i in $$OBJ2; do SCR="$$SCR -e s/^$$i.lo:/$$i.o:/"; done; \
+	mv Makefile Makefile.bak; $(SED) $$SCR Makefile.bak > Makefile && \
+	$(RM) Makefile.bak; fi
diff -urN openldap-2.4.25/contrib/slapd-modules/smbk5pwd/Makefile openldap-2.4.25-contrib/contrib/slapd-modules/smbk5pwd/Makefile
--- openldap-2.4.25/contrib/slapd-modules/smbk5pwd/Makefile	2011-01-05 00:49:36.000000000 +0100
+++ openldap-2.4.25-contrib/contrib/slapd-modules/smbk5pwd/Makefile	1970-01-01 01:00:00.000000000 +0100
@@ -1,55 +0,0 @@
-# $OpenLDAP: pkg/ldap/contrib/slapd-modules/smbk5pwd/Makefile,v 1.1.6.6 2011/01/04 23:49:36 kurt Exp $
-# This work is part of OpenLDAP Software <http://www.openldap.org/>.
-#
-# Copyright 1998-2011 The OpenLDAP Foundation.
-# Copyright 2004 Howard Chu, Symas Corp. All Rights Reserved.
-#
-# Redistribution and use in source and binary forms, with or without
-# modification, are permitted only as authorized by the OpenLDAP
-# Public License.
-#
-# A copy of this license is available in the file LICENSE in the
-# top-level directory of the distribution or, alternatively, at
-# <http://www.OpenLDAP.org/license.html>.
-
-LIBTOOL=../../../libtool
-OPT=-g -O2
-CC=gcc
-
-# Omit DO_KRB5 or DO_SAMBA if you don't want to support it.
-DEFS=-DDO_KRB5 -DDO_SAMBA
-
-HEIMDAL_INC=-I/usr/heimdal/include
-SSL_INC=
-LDAP_INC=-I../../../include -I../../../servers/slapd
-INCS=$(LDAP_INC) $(HEIMDAL_INC) $(SSL_INC)
-
-HEIMDAL_LIB=-L/usr/heimdal/lib -lkrb5 -lkadm5srv
-SSL_LIB=-lcrypto
-LDAP_LIB=-lldap_r -llber
-LIBS=$(LDAP_LIB) $(HEIMDAL_LIB) $(SSL_LIB)
-
-prefix=/usr/local
-exec_prefix=$(prefix)
-ldap_subdir=/openldap
-
-libdir=$(exec_prefix)/lib
-libexecdir=$(exec_prefix)/libexec
-moduledir = $(libexecdir)$(ldap_subdir)
-
-all:	smbk5pwd.la
-
-
-smbk5pwd.lo:	smbk5pwd.c
-	$(LIBTOOL) --mode=compile $(CC) $(OPT) $(DEFS) $(INCS) -c $?
-
-smbk5pwd.la:	smbk5pwd.lo
-	$(LIBTOOL) --mode=link $(CC) $(OPT) -version-info 0:0:0 \
-	-rpath $(moduledir) -module -o $@ $? $(LIBS)
-
-clean:
-	rm -f smbk5pwd.lo smbk5pwd.la
-
-install: smbk5pwd.la
-	mkdir -p $(DESTDIR)$(moduledir)
-	$(LIBTOOL) --mode=install cp smbk5pwd.la $(DESTDIR)$(moduledir)
diff -urN openldap-2.4.25/contrib/slapd-modules/smbk5pwd/Makefile.in openldap-2.4.25-contrib/contrib/slapd-modules/smbk5pwd/Makefile.in
--- openldap-2.4.25/contrib/slapd-modules/smbk5pwd/Makefile.in	1970-01-01 01:00:00.000000000 +0100
+++ openldap-2.4.25-contrib/contrib/slapd-modules/smbk5pwd/Makefile.in	2011-03-28 17:51:20.152152000 +0200
@@ -0,0 +1,22 @@
+BUILD_MOD = mod
+
+SRCS = smbk5pwd.c
+
+OBJS = smbk5pwd.lo
+
+LIBBASE = smbk5pwd
+
+LDAP_INCDIR= ../../../include       
+LDAP_LIBDIR= ../../../libraries
+
+HEIMDAL_LIBS = -lkrb5 -lkadm5srv
+
+MOD_DEFS = -DSLAPD_IMPORT -DDO_SAMBA -DDO_KRB5
+MOD_LIBS = $(HEIMDAL_LIBS)
+
+shared_LDAP_LIBS = $(LDAP_LIBLDAP_R_LA) $(LDAP_LIBLBER_LA)
+NT_LINK_LIBS = -L.. -lslapd $(@BUILD_LIBS_DYNAMIC@_LDAP_LIBS)
+UNIX_LINK_LIBS = $(@BUILD_LIBS_DYNAMIC@_LDAP_LIBS)
+
+XINCPATH = -I. -I$(srcdir)/. -I../../../servers/slapd
+XDEFS = $(MODULES_CPPFLAGS)
diff -urN openldap-2.4.25/contrib/slapd-modules/trace/Makefile.in openldap-2.4.25-contrib/contrib/slapd-modules/trace/Makefile.in
--- openldap-2.4.25/contrib/slapd-modules/trace/Makefile.in	1970-01-01 01:00:00.000000000 +0100
+++ openldap-2.4.25-contrib/contrib/slapd-modules/trace/Makefile.in	2011-03-28 17:51:20.153152000 +0200
@@ -0,0 +1,20 @@
+BUILD_MOD = mod
+
+SRCS = trace.c
+
+OBJS = trace.lo
+
+LIBBASE = trace
+
+LDAP_INCDIR= ../../../include       
+LDAP_LIBDIR= ../../../libraries
+
+MOD_DEFS = -DSLAPD_IMPORT -DSLAPD_OVER_TRACE=SLAPD_MOD_DYNAMIC
+#MOD_LIBS = 
+
+shared_LDAP_LIBS = $(LDAP_LIBLDAP_R_LA) $(LDAP_LIBLBER_LA)
+NT_LINK_LIBS = -L.. -lslapd $(@BUILD_LIBS_DYNAMIC@_LDAP_LIBS)
+UNIX_LINK_LIBS = $(@BUILD_LIBS_DYNAMIC@_LDAP_LIBS)
+
+XINCPATH = -I. -I$(srcdir)/. -I../../../servers/slapd
+XDEFS = $(MODULES_CPPFLAGS)
